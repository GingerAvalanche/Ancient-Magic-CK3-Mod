#Events managing health concerns around ancient magic

namespace = AMHealth

#MANA DEVOURING: by Donekulda
#	0001-0099: becoming ill
#	0101-0199: 


#########################
#########################
# MANA DEVOURING EVENTS #
#########################
#########################

#You contract mana devouring
AMHealth.0001 = {
	type = character_event
	title = AMHealth.0001.t
	desc = {
		desc = health.1006.desc
		triggered_desc = {
			trigger = {
				court_physician_available_trigger = yes
				liege_picks_treatment_trigger = no
			}
			desc = health.1006.court_physician.desc
		}
	}
	
	theme = healthcare
	left_portrait = {
		character = root
		animation = sick
	}
	right_portrait = {
		character = scope:physician
		triggered_animation = {
			trigger = { scope:physician = { health_event_is_worried_trigger = { CHARACTER = root } } }
			animation = worry
		}
		triggered_animation = {
			trigger = { scope:physician = { ai_rationality >= 0 } } #Don't look rational if you're not
			animation = personality_rational
		}
		animation = idle
	}

	trigger = {
		can_contract_disease_trigger = { DISEASE = consumption }
	}

	weight_multiplier = {
		base = 1

		modifier = {
			health <= fine_health
			factor = 1.1
		}
		modifier = {
			health <= poor_health
			factor = 1.1
		}
		modifier = {
			is_adult = no
			factor = 1.3
		}
	}

	immediate = {
		play_music_cue = "mx_cue_illness"
		save_court_physician_as_effect = { SCOPE_NAME = physician }
		contract_disease_effect = { DISEASE = consumption TREATMENT_EVENT = no } #Adds the trait, sends event "health.2201" to those who care
	}

	###NO COURT PHYSICIAN OPTIONS###
	#Find physician
	option = {
		trigger = {
			NOT = { exists = scope:physician }
			is_landed = yes
		}
		name = health.3101.e
		find_court_physician_effect = yes
		ai_chance = { base = 5 }
	}

	#OK
	option = {
		trigger = {
			trigger_if = {
				limit = { exists = scope:physician }
				liege_picks_treatment_trigger = yes
			}
			trigger_else = {
				always = yes
			}
		}
		name = health.1006.a
		ai_chance = { base = 1 }
	}

	###COURT PHYSICIAN OPTIONS###
	#Safe treatment
	option = {
		trigger = {
			exists = scope:physician
			liege_picks_treatment_trigger = no
		}
		name = health.3101.a
		safe_disease_treatment_effect = { PATIENT = root TREATMENT_PICKER = root }
		ai_chance = { base = 10 }
	}

	#Risky treatment
	option = {
		trigger = {
			exists = scope:physician
			liege_picks_treatment_trigger = no
		}
		name = health.3101.b
		risky_disease_treatment_effect = { PATIENT = root TREATMENT_PICKER = root }
		ai_chance = { base = 1 }
	}
	
	#Mystic treatment
	option = {
		trigger = {
			court_physician_available_trigger = yes
			liege_picks_treatment_trigger = no
			scope:physician = { has_trait = lifestyle_mystic }
		}
		name = health.3101.c
		mystic_disease_treatment_effect = { PATIENT = root TREATMENT_PICKER = root }
		ai_chance = {
			base = 0.5
			modifier = {
				add = -0.5
				ai_zeal >= 0
			}
		}
	}

	#No treatment
	option = {
		trigger = {
			exists = scope:physician
			liege_picks_treatment_trigger = no
		}
		name = health.3101.d
		no_disease_treatment_effect = yes
		ai_chance = { base = 0 }
	}

}



##################
# RECOVERY EVENTS
##################
