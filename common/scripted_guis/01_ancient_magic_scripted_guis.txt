grant_to_mage = {
	is_shown = { # Can be omitted as always true
		always = yes
	}

	is_valid = {
		ROOT = {
			title_province = {
				has_holding_type = city_of_magic_holding
			}
		}
	}

	effect = {
		ROOT = {
			holder = {
				save_scope_as = old_holder
				faith = {
					save_scope_as = holder_faith
				}
				culture = {
					save_scope_as = holder_culture
				}
			}
			faith = {
				save_scope_as = land_faith
			}
			culture = {
				save_scope_as = land_culture
			}
		}

		create_character = {
			save_scope_as = new_holder
			age = { 18 65 }
			gender_female_chance = 50
			trait = mage
			random_traits = yes
			employer = scope:old_holder
			random_faith = {
				scope:land_faith = { always = yes }
				scope:holder_faith = { always = yes }
			}
			random_culture = {
				scope:land_culture = { always = yes }
				scope:holder_culture = { always = yes }
			}
			dynasty = generate
		}

		create_title_and_vassal_change = {
			type = granted
			save_scope_as = title_change
			add_claim_on_loss = no
		}
		change_title_holder = {
			holder = scope:new_holder
			change = scope:title_change
		}
		resolve_title_and_vassal_change = scope:title_change

		scope:new_holder = {
			change_government = republic_government
		}
	}
}
