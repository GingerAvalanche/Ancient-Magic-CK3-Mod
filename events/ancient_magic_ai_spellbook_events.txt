namespace = ancient_magic_ai_spellbook_events

#spell select screen

ancient_magic_ai_spellbook_events.004 = { #Elomancy book
	title = ancient_magic_ai_spellbook_events.004.t
	desc = ancient_magic_ai_spellbook_events.004.desc
	
	option = { #Stone Golems
		trigger = {
			has_perk = golem_creation_perk
			var:mana >= 100
			NOT = { has_character_modifier = golem_cooldown_modifier }
		}
		name = ancient_magic_ai_spellbook_events.004.a
		trigger_event = ancient_magic_ai_spellbook_events.401
		
		ai_chance = {
			base = 0
			
			modifier = {
				add = 25
				is_at_war = yes
			}
		}
	}
	option = { #Lava Golems
		trigger = {
			has_trait = lord_of_the_elements
			var:mana >= 400
			NOT = { has_character_modifier = lava_golem_cooldown_modifier }
		}
		name = ancient_magic_ai_spellbook_events.004.b
		trigger_event = ancient_magic_ai_spellbook_events.402
		
		ai_chance = {
			base = 0
			
			modifier = {
				add = 30
				is_at_war = yes
			}
		}
	}
	option = { #Flame Aura
		trigger = {
			has_perk = flame_aura_perk
			var:mana >= 100
		}
		name = ancient_magic_ai_spellbook_events.004.c
		trigger_event = ancient_magic_ai_spellbook_events.403
		
		ai_chance = {
			base = 25
			
			modifier = {
				factor = 0
				var:mana_gen < 15
			}
			
			modifier = {
				factor = 0
				has_character_modifier = flame_aura_modifier
			}
			
			modifier = {
				add = 50
				has_character_modifier = flame_aura_modifier
				var:mana_gen <= 0
			}
			
		}
	}
	option = { #Flaming Weapons
		trigger = {
			has_perk = flaming_weapons_perk
			var:mana >= 100
		}
		name = ancient_magic_ai_spellbook_events.004.d
		trigger_event = ancient_magic_ai_spellbook_events.404
		
		ai_chance = {
			base = 25
			
			modifier = {
				factor = 0
				var:mana_gen < 15
			}
			
			modifier = {
				factor = 0
				has_character_modifier = flaming_weapons_modifier
			}
			
			modifier = {
				add = 50
				has_character_modifier = flaming_weapons_modifier
				var:mana_gen <= 0
			}
			
		}
	}
	option = { #Living Earthworks
		trigger = {
			has_perk = living_earthworks_perk
			var:mana >= 100
		}
		name = ancient_magic_ai_spellbook_events.004.e
		trigger_event = ancient_magic_ai_spellbook_events.405
		
		ai_chance = {
			base = 25
			
			modifier = {
				factor = 0
				var:mana_gen < 15
			}
			
			modifier = {
				factor = 0
				has_character_modifier = living_earthworks_modifier
			}
			
			modifier = {
				add = 50
				has_character_modifier = living_earthworks_modifier
				var:mana_gen <= 0
			}
			
		}
	}
	option = { #Control Water
		trigger = {
			has_perk = control_water_perk
			var:mana >= 100
		}
		name = ancient_magic_ai_spellbook_events.004.f
		trigger_event = ancient_magic_ai_spellbook_events.406
		
		ai_chance = {
			base = 25
			
			modifier = {
				factor = 0
				var:mana_gen < 15
			}
			
			modifier = {
				factor = 0
				has_character_modifier = control_water_modifier
			}
			
			modifier = {
				add = 50
				has_character_modifier = control_water_modifier
				var:mana_gen <= 0
			}
			
		}
	}
	#option = { #Draught
	#	trigger = {
	#		has_perk = drought_perk
	#	}
	#	name = ancient_magic_ai_spellbook_events.004.g
	#	trigger_event = ancient_magic_ai_spellbook_events.407
	#}
	option = { #Cloak of Elements
		trigger = {
			has_perk = elemental_warrior_perk
		}
		name = ancient_magic_ai_spellbook_events.004.h
		trigger_event = ancient_magic_ai_spellbook_events.408
		
		ai_chance = {
			base = 25
			
			modifier = {
				factor = 0
				var:mana_gen < 15
			}
			
			modifier = { 
				factor = 0
				has_character_modifier = elemental_warrior_modifier
			}
			
			modifier = {
				add = 50
				has_character_modifier = elemental_warrior_modifier
				var:mana_gen <= 0
			}
			
		}
	}
	option = {
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.001
		
		ai_chance = {
			base = 0
			
			modifier = {
				add = 50
				var:mana_gen < 15
			}
		}
	}
}

ancient_magic_ai_spellbook_events.005 = { #Necromancy book
	title = ancient_magic_ai_spellbook_events.005.t
	desc = ancient_magic_ai_spellbook_events.005.desc
	
	option = { #Raise Undead Horde
		trigger = {
			var:mana >= 200
			NOT = {
				has_character_modifier = undead_horde_cooldown_modifier
			}
			has_perk = necromancy_perk
		}
		name = ancient_magic_ai_spellbook_events.005.a
		trigger_event = ancient_magic_ai_spellbook_events.501
	}
	option = { #Become Liche
		trigger = {
			has_perk = deacon_of_death
			var:mana >= 600
			NOT = { has_trait = undead }
		}
		name = ancient_magic_ai_spellbook_events.005.b
		trigger_event = ancient_magic_ai_spellbook_events.502
		
		ai_chance = {
			base = 0
			
			modifier = { 
				add = 15
				has_trait = ambitious
			}
			
			modifier = {
				add = 30
				is_immortal = no
			}
			
		}
	}
	
	#option = { #Grand Gift of Unlife
	#	trigger = {
	#		has_perk = deacon_of_death
	#	}
	#	name = ancient_magic_ai_spellbook_events.005.c
	#	trigger_event = ancient_magic_ai_spellbook_events.503
	#}
	
	#option = { #Inflict Illness
	#	trigger = {
	#		has_perk = inflict_illness_perk
	#	}
	#	name = ancient_magic_ai_spellbook_events.005.d
	#	trigger_event = ancient_magic_ai_spellbook_events.504
	#}
	
	#option = { #Spread Plague
	#	trigger = {
	#		has_perk = plague_lord_perk
	#	}
	#	name = ancient_magic_ai_spellbook_events.005.e
	#	trigger_event = ancient_magic_ai_spellbook_events.505
	#}
	
	#option = { #Drain Life
	#	trigger = {
	#		has_perk = drain_life_perk
	#	}
	#	name = ancient_magic_ai_spellbook_events.005.f
	#	trigger_event = ancient_magic_ai_spellbook_events.506
	#}
	#option = { #Death Stare
	#	trigger = {
	#		has_perk = death_stare_perk
	#	}
	#	name = ancient_magic_ai_spellbook_events.005.g
	#	trigger_event = ancient_magic_ai_spellbook_events.507
	#}
	option = { #Aura of Death
		trigger = {
			var:mana >= 100
			has_perk = aura_of_death_perk
		}
		name = ancient_magic_ai_spellbook_events.005.h
		trigger_event = ancient_magic_ai_spellbook_events.508
		
		ai_chance = {
			base = 25
			
			modifier = {
				factor = 0
				var:mana_gen < 30
			}
			
			modifier = { 
				factor = 0
				has_character_modifier = aura_of_death_modifier
			}
			
			modifier = {
				add = 50
				has_character_modifier = aura_of_death_modifier
				var:mana_gen <= 0
			}
			
		}
	}
	option = {
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.001
		
		ai_chance = {
			base = 0
			
			modifier = {
				add = 50
				AND = {
					var:mana_gen < 30
					var:mana < 200
				}
			}
		}
	}
}

ancient_magic_ai_spellbook_events.006 = { #Biomancy book
	title = ancient_magic_ai_spellbook_events.006.t
	desc = ancient_magic_ai_spellbook_events.006.desc
	
	option = { #Strengthen Blood
		trigger = {
			has_perk = improve_trait_perk
		}
		name = ancient_magic_ai_spellbook_events.006.a
		trigger_event = ancient_magic_ai_spellbook_events.601
	}
	option = { #Perfect Blood
		trigger = {
			has_perk = perfect_trait_perk
		}
		name = ancient_magic_ai_spellbook_events.006.b
		trigger_event = ancient_magic_ai_spellbook_events.602
	}
	option = { #Weaken Blood
		trigger = {
			has_perk = weaken_trait_perk
		}
		name = ancient_magic_ai_spellbook_events.006.c
		trigger_event = ancient_magic_ai_spellbook_events.603
	}
	option = { #Criple Blood
		trigger = {
			has_perk = criple_trait_perk
		}
		name = ancient_magic_ai_spellbook_events.006.d
		trigger_event = ancient_magic_ai_spellbook_events.604
	}
	option = { #Fertility Control
		trigger = {
			has_perk = improve_trait_perk
		}
		name = ancient_magic_ai_spellbook_events.006.e
		trigger_event = ancient_magic_ai_spellbook_events.605
	}
	option = { #Impregnate
		trigger = {
			has_perk = impregnate_perk
		}
		name = ancient_magic_ai_spellbook_events.006.f
		trigger_event = ancient_magic_ai_spellbook_events.606
	}
	option = { #Sculpt Flesh
		trigger = {
			has_perk = sculpter_of_flesh_perk
		}
		name = ancient_magic_ai_spellbook_events.006.g
		trigger_event = ancient_magic_ai_spellbook_events.607
	}
	option = { #Rewrite Blood
		trigger = {
			has_perk = architect_of_bloodlines_perk
		}
		name = ancient_magic_ai_spellbook_events.006.h
		trigger_event = ancient_magic_ai_spellbook_events.608
	}
	option = {
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.001
	}
}

ancient_magic_ai_spellbook_events.007 = { #Mensomancy book
	title = ancient_magic_ai_spellbook_events.007.t
	desc = ancient_magic_ai_spellbook_events.007.desc
	
	option = { #Entrance
		trigger = {
			has_perk = entrance_perk
		}
		name = ancient_magic_ai_spellbook_events.007.a
		trigger_event = ancient_magic_ai_spellbook_events.701
	}
	option = { #Incite Lust
		trigger = {
			has_perk = incite_lust_perk
		}
		name = ancient_magic_ai_spellbook_events.007.b
		trigger_event = ancient_magic_ai_spellbook_events.702
	}
	option = { #Incite Obedience
		trigger = {
			has_perk = incite_obedience_perk
		}
		name = ancient_magic_ai_spellbook_events.007.c
		trigger_event = ancient_magic_ai_spellbook_events.703
	}
	option = { #Dominate
		trigger = {
			has_perk = dominate_perk
		}
		name = ancient_magic_ai_spellbook_events.007.d
		trigger_event = ancient_magic_ai_spellbook_events.704
	}
	option = { #Beguiling Aura
		trigger = {
			has_perk = beguiling_aura_perk
		}
		name = ancient_magic_ai_spellbook_events.007.e
		trigger_event = ancient_magic_ai_spellbook_events.705
	}
	option = { #Friendship
		trigger = {
			has_perk = friendship_perk
		}
		name = ancient_magic_ai_spellbook_events.007.f
		trigger_event = ancient_magic_ai_spellbook_events.706
	}
	option = { #Mind Control
		trigger = {
			has_perk = master_of_puppets_perk
		}
		name = ancient_magic_ai_spellbook_events.007.g
		trigger_event = ancient_magic_ai_spellbook_events.707
	}
	option = { #Enchanting Aura
		trigger = {
			has_perk = enchanting_aura_perk
		}
		name = ancient_magic_ai_spellbook_events.007.h
		trigger_event = ancient_magic_ai_spellbook_events.708
	}
	option = {
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.001
	}
}

#time spells

ancient_magic_ai_spellbook_events.201 = { #Halt Aging
	title = ancient_magic_ai_spellbook_events.201.t
	desc = ancient_magic_ai_spellbook_events.201.desc
	
	option = {
		name = ancient_magic_spellbook_cast_spell
		trigger = {
			var:mana >= 500
			NOT = { has_character_modifier = halt_aging_spell_modifier }
			has_trait = master_of_time
		}
		show_as_unavailable = {
			OR = {
				var:mana < 500
				has_character_modifier = halt_aging_spell_modifier
				NOT = { has_trait = master_of_time }
			}
		}
		change_mana = { VALUE = -500 }
		add_character_modifier = {
			modifier = halt_aging_spell_modifier
			months = 6
		}
	}
	
	option = {
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.002
	}
}

ancient_magic_ai_spellbook_events.202 = { #Restart Aging
	title = ancient_magic_ai_spellbook_events.202.t
	desc = ancient_magic_ai_spellbook_events.202.desc
	
	option = {
		name = ancient_magic_spellbook_cast_spell
		trigger = {
			var:mana >= 500
			NOT = { has_character_modifier = restart_aging_spell_modifier }
			has_trait = master_of_time
		}
		show_as_unavailable = {
			OR = {
				var:mana < 500
				has_character_modifier = restart_aging_spell_modifier
				NOT = { has_trait = master_of_time }
			}
		}
		change_mana = { VALUE = -500 }
		add_character_modifier = {
			modifier = restart_aging_spell_modifier
			months = 6
		}
	}
	
	option = {
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.002
	}
}

ancient_magic_ai_spellbook_events.203 = { #Haste
	immediate = {
		if = {
			limit = {
				NOT = {
					has_character_modifier = magic_haste_modifier
				}
			}

			change_mana = { VALUE = -100 }

			change_mana_gen = { VALUE = -15 }

			while = {
				count = mage_level
				add_character_modifier = {
					modifier = magic_haste_modifier
					mode = add
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					has_character_modifier = magic_haste_modifier
				}
			}
			change_mana_gen = { VALUE = 15 }

			while = {
				count = 100
				remove_character_modifier = magic_haste_modifier
			}
		}
		
		if = {
			limit = {
				var:mana >= 150
			}
			trigger_event = ancient_magic_ai_spellbook_events.001
		}
	}
}

ancient_magic_ai_spellbook_events.204 = { #Glimpse the Future
	immediate = {
		if = {
			limit = {
				NOT = {
					has_character_modifier = glimpse_the_future_modifier
				}
			}

			change_mana = { VALUE = -100 }

			change_mana_gen = { VALUE = -15 }

			while = {
				count = mage_level
				add_character_modifier = {
					modifier = glimpse_the_future_modifier
					mode = add
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					has_character_modifier = glimpse_the_future_modifier
				}
			}

			change_mana_gen = { VALUE = 15 }

			while = {
				count = 100
				remove_character_modifier = glimpse_the_future_modifier
			}
		}
		
		if = {
			limit = {
				var:mana >= 150
			}
			trigger_event = ancient_magic_ai_spellbook_events.001
		}
	}
}

ancient_magic_ai_spellbook_events.205 = { #Financial Times
	immediate = {
		if = {
			limit = {
				NOT = {
					has_character_modifier = financial_times_modifier
				}
			}

			change_mana = { VALUE = -100 }

			change_mana_gen = { VALUE = -15 }

			while = {
				count = mage_level
				add_character_modifier = {
					modifier = financial_times_modifier
					mode = add
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					has_character_modifier = financial_times_modifier
				}
			}

			change_mana_gen = { VALUE = 15 }

			while = {
				count = 100
				remove_character_modifier = financial_times_modifier
			}
		}
		
		if = {
			limit = {
				var:mana >= 150
			}
			trigger_event = ancient_magic_ai_spellbook_events.001
		}
	}
}

ancient_magic_ai_spellbook_events.206 = { #Celerity
	immediate = {
		if = {
			limit = {
				NOT = {
					has_character_modifier = celerity_modifier
				}
			}

			change_mana = { VALUE = -100 }

			change_mana_gen = { VALUE = -15 }

			while = {
				count = mage_level
				add_character_modifier = {
					modifier = celerity_modifier
					mode = add
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					has_character_modifier = celerity_modifier
				}
			}

			change_mana_gen = { VALUE = 15 }

			while = {
				count = 100
				remove_character_modifier = celerity_modifier
			}
		}
		
		if = {
			limit = {
				var:mana >= 150
			}
			trigger_event = ancient_magic_ai_spellbook_events.001
		}
	}
}

ancient_magic_ai_spellbook_events.207 = { #Slowness
	title = ancient_magic_ai_spellbook_events.207.t
	desc = ancient_magic_ai_spellbook_events.207.desc
	
	option = {
		name = ancient_magic_spellbook_activate_aura
		trigger = {
			var:mana >= 100
			has_perk = slowness_perk
			NOT = {
				has_character_modifier = slowness_modifier
			}
		}
		show_as_unavailable = {
			OR = {
				var:mana < 100
				has_character_modifier = slowness_modifier
			}
		}

		change_mana = { VALUE = -100 }

		change_mana_gen = { VALUE = -15 }

		while = {
			count = mage_level
			add_character_modifier = {
				modifier = slowness_modifier
				mode = add
			}
		}
	}

	option = {
		name = ancient_magic_spellbook_deactivate_aura
		trigger = {
			var:mana >= 100
			has_perk = slowness_perk
			has_character_modifier = slowness_modifier
		}
		show_as_unavailable = {
			var:mana < 100
			NOT = {
				has_character_modifier = slowness_modifier
			}
		}

		change_mana_gen = { VALUE = 15 }

		while = {
			count = 100
			remove_character_modifier = slowness_modifier
		}
	}
	
	option = {
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.002
	}
}

ancient_magic_ai_spellbook_events.208 = { #Mass Slowness
	title = ancient_magic_ai_spellbook_events.208.t
	desc = ancient_magic_ai_spellbook_events.208.desc
	
	option = {
		name = ancient_magic_spellbook_activate_aura
		trigger = {
			var:mana >= 100
			has_perk = mass_slowness_perk
			NOT = {
				has_character_modifier = mass_slowness_modifier
			}
		}
		show_as_unavailable = {
			OR = {
				var:mana < 100
				has_character_modifier = mass_slowness_modifier
			}
		}

		change_mana = { VALUE = -100 }

		change_mana_gen = { VALUE = -15 }

		while = {
			count = mage_level
			add_character_modifier = {
				modifier = mass_slowness_modifier
				mode = add
			}
		}
	}

	option = {
		name = ancient_magic_spellbook_deactivate_aura
		trigger = {
			var:mana >= 100
			has_perk = mass_slowness_perk
			has_character_modifier = mass_slowness_modifier
		}
		show_as_unavailable = {
			var:mana < 100
			NOT = {
				has_character_modifier = mass_slowness_modifier
			}
		}

		change_mana_gen = { VALUE = 15 }

		while = {
			count = 100
			remove_character_modifier = mass_slowness_modifier
		}
	}
	
	option = {
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.002
	}
}

ancient_magic_ai_spellbook_events.209 = { #Temporal Manipulation
	immediate = {
		if = {
			limit = {
				NOT = {
					has_character_modifier = temporal_manipulation_modifier
				}
			}

			change_mana = { VALUE = -100 }

			change_mana_gen = { VALUE = -30 }

			while = {
				count = mage_level
				add_character_modifier = {
					modifier = temporal_manipulation_modifier
					mode = add
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					has_character_modifier = temporal_manipulation_modifier
				}
			}

			change_mana_gen = { VALUE = 30 }

			while = {
				count = 100
				remove_character_modifier = temporal_manipulation_modifier
			}
		}
		
		if = {
			limit = {
				var:mana >= 150
			}
			trigger_event = ancient_magic_ai_spellbook_events.001
		}
	}
}

#life spells

ancient_magic_ai_spellbook_events.301 = { #Minor Restoration
	title = ancient_magic_ai_spellbook_events.301.t
	desc = ancient_magic_ai_spellbook_events.301.desc
	
	option = { #sickly
		name = ancient_magic_heal_sickly
		trigger = {
			has_trait = sickly
			var:mana >= 50
		}
		change_mana = { VALUE = -50 }
		remove_trait = sickly
	}
	
	option = { #ill
		name = ancient_magic_heal_ill
		trigger = {
			has_trait = ill
			var:mana >= 50
		}
		change_mana = { VALUE = -50 }
		remove_trait = ill
	}
	
	option = { #early_great_pox
		name = ancient_magic_heal_early_great_pox
		trigger = {
			has_trait = early_great_pox
			var:mana >= 75
		}
		change_mana = { VALUE = -75 }
		remove_trait = early_great_pox
		ai_chance = {
			base = 100
		}
	}
	
	option = { #smallpox
		name = ancient_magic_heal_smallpox
		trigger = {
			has_trait = smallpox
			var:mana >= 75
		}
		change_mana = { VALUE = -75 }
		remove_trait = smallpox
		ai_chance = {
			base = 75
		}
	}
	
	option = { #lovers_pox
		name = ancient_magic_heal_lovers_pox
		trigger = {
			has_trait = lovers_pox
			var:mana >= 50
		}
		change_mana = { VALUE = -50 }
		remove_trait = lovers_pox
	}
	
	option = { #wounded_1
		name = ancient_magic_heal_wounded_1
		trigger = {
			has_trait = wounded_1
			var:mana >= 50
		}
		change_mana = { VALUE = -50 }
		remove_trait = wounded_1
	}
	
	option = { #infirm
		name = ancient_magic_heal_infirm
		trigger = {
			has_trait = infirm
			var:mana >= 50
		}
		change_mana = { VALUE = -50 }
		remove_trait = infirm
	}
	
	option = { #exit
		name = ancient_magic_ai_spellbook_events_back
	}
}

ancient_magic_ai_spellbook_events.302 = { #Major Restoration
	title = ancient_magic_ai_spellbook_events.302.t
	desc = ancient_magic_ai_spellbook_events.302.desc
	
	option = { #great_pox
		name = ancient_magic_heal_great_pox
		trigger = {
			has_trait = great_pox
			var:mana >= 150
		}
		change_mana = { VALUE = -150 }
		remove_trait = great_pox
		ai_chance = {
			base = 75
		}
	}
	
	option = { #pneumonic
		name = ancient_magic_heal_pneumonic
		trigger = {
			has_trait = pneumonic
			var:mana >= 100
		}
		change_mana = { VALUE = -100 }
		remove_trait = pneumonic
	}
	
	option = { #cancer
		name = ancient_magic_heal_cancer
		trigger = {
			has_trait = cancer
			var:mana >= 150
		}
		change_mana = { VALUE = -150 }
		remove_trait = cancer
		ai_chance = {
			base = 100
		}
	}
	
	option = { #leper
		name = ancient_magic_heal_leper
		trigger = {
			has_trait = leper
			var:mana >= 100
		}
		change_mana = { VALUE = -100 }
		remove_trait = leper
	}
	
	option = { #maimed
		name = ancient_magic_heal_maimed
		trigger = {
			has_trait = maimed
			var:mana >= 100
		}
		change_mana = { VALUE = -100 }
		remove_trait = maimed
	}
	
	option = { #wounded_2
		name = ancient_magic_heal_wounded_2
		trigger = {
			has_trait = wounded_2
			var:mana >= 100
		}
		change_mana = { VALUE = -100 }
		remove_trait = wounded_2
	}
	
	option = { #gout_ridden
		name = ancient_magic_heal_gout_ridden
		trigger = {
			has_trait = gout_ridden
			var:mana >= 100
		}
		change_mana = { VALUE = -100 }
		remove_trait = gout_ridden
	}
	
	option = { #consumption
		name = ancient_magic_heal_consumption
		trigger = {
			has_trait = consumption
			var:mana >= 100
		}
		change_mana = { VALUE = -100 }
		remove_trait = consumption
	}
	
	option = { #typhus
		name = ancient_magic_heal_typhus
		trigger = {
			has_trait = typhus
			var:mana >= 100
		}
		change_mana = { VALUE = -100 }
		remove_trait = typhus
	}
	
	option = { #bubonic_plague
		name = ancient_magic_heal_bubonic_plague
		trigger = {
			has_trait = bubonic_plague
			var:mana >= 150
		}
		change_mana = { VALUE = -150 }
		remove_trait = bubonic_plague
		
		ai_chance = {
			base = 100
		}
	}
	
	option = { #go back
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.001
	}
}

ancient_magic_ai_spellbook_events.303 = { #Full Restoration
	title = ancient_magic_ai_spellbook_events.303.t
	desc = ancient_magic_ai_spellbook_events.303.desc
	
	option = { #incapable
		name = ancient_magic_heal_incapable
		trigger = {
			has_trait = incapable
			var:mana >= 200
		}
		change_mana = { VALUE = -200 }
		remove_trait = incapable
	}
	
	option = { #wounded_3
		name = ancient_magic_heal_wounded_3
		trigger = {
			has_trait = wounded_3
			var:mana >= 200
		}
		change_mana = { VALUE = -200 }
		remove_trait = bubonic_plague
		
		ai_chance = {
			base = 100
		}
	}
	
	option = { #one_eyed
		name = ancient_magic_heal_one_eyed
		trigger = {
			has_trait = one_eyed
			var:mana >= 225
		}
		change_mana = { VALUE = -225 }
		remove_trait = one_eyed
	}
	
	option = { #one_legged
		name = ancient_magic_heal_one_legged
		trigger = {
			has_trait = one_legged
			var:mana >= 250
		}
		change_mana = { VALUE = -250 }
		remove_trait = one_legged
	}
	
	option = { #disfigured
		name = ancient_magic_heal_disfigured
		trigger = {
			has_trait = disfigured
			var:mana >= 225
		}
		change_mana = { VALUE = -225 }
		remove_trait = disfigured
	}
	
	option = { #scarred
		name = ancient_magic_heal_scarred
		trigger = {
			has_trait = scarred
			var:mana >= 200
		}
		change_mana = { VALUE = -200 }
		remove_trait = scarred
	}
	
	option = { #eunuch
		name = ancient_magic_heal_eunuch
		trigger = {
			has_trait = eunuch
			var:mana >= 250
		}
		change_mana = { VALUE = -250 }
		remove_trait = eunuch
	}
	
	option = { #blind
		name = ancient_magic_heal_blind
		trigger = {
			has_trait = blind
			var:mana >= 200
		}
		change_mana = { VALUE = -200 }
		remove_trait = blind
	}
	
	option = { #go back
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.001
	}
}

#elemental spells

ancient_magic_ai_spellbook_events.401 = { #Stone Golems
	
	immediate = {
		change_mana = { VALUE = -100 }
		spawn_army = {
			name = golem_army
			uses_supply = no
			inheritable = no
			men_at_arms = {
				type = golem
				stacks = mage_level
			}
			levy = 0
			location = capital_province
		}
		add_character_modifier = {
			modifier = golem_cooldown_modifier
			years = 5
		}
		
		if = {
			limit = {
				var:mana >= 150
			}
			trigger_event = ancient_magic_ai_spellbook_events.001
		}
	}
}

ancient_magic_ai_spellbook_events.402 = { #Lava Golems
	
	immediate = {
		change_mana = { VALUE = -400 }
		
		spawn_army = {
			name = lava_golem_army
			uses_supply = no
			inheritable = no
			men_at_arms = {
				type = lava_golem
				stacks = mage_level
			}
			levy = 0
			location = capital_province
		}
		add_character_modifier = {
			modifier = lava_golem_cooldown_modifier
			years = 5
		}
		
		if = {
			limit = {
				var:mana >= 150
			}
			trigger_event = ancient_magic_ai_spellbook_events.001
		}
	}
}

ancient_magic_ai_spellbook_events.403 = { #Flame Aura
	immediate = {
		if = {
			limit = {
				var:mana >= 100
				NOT = {
					has_character_modifier = flame_aura_modifier
				}
			}

			change_mana = { VALUE = -100 }

			change_mana_gen = { VALUE = -15 }

			while = {
				count = mage_level
				add_character_modifier = {
					modifier = flame_aura_modifier
					mode = add
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					has_character_modifier = flame_aura_modifier
				}
			}

			change_mana_gen = { VALUE = 15 }

			while = {
				count = 100
				remove_character_modifier = flame_aura_modifier
			}
		}
		
		if = {
			limit = {
				var:mana >= 150
			}
			trigger_event = ancient_magic_ai_spellbook_events.001
		}
	}
}

ancient_magic_ai_spellbook_events.404 = { #Flaming Weapons
	immediate = {
		if = {
			limit = {
				var:mana >= 100
				NOT = {
					has_character_modifier = flaming_weapons_modifier
				}
			}

			change_mana = { VALUE = -100 }

			change_mana_gen = { VALUE = -15 }

			while = {
				count = mage_level
				add_character_modifier = {
					modifier = flaming_weapons_modifier
					mode = add
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					has_character_modifier = flaming_weapons_modifier
				}
			}

			change_mana_gen = { VALUE = 15 }

			while = {
				count = 100
				remove_character_modifier = flaming_weapons_modifier
			}
		}
		
		if = {
			limit = {
				var:mana >= 150
			}
			trigger_event = ancient_magic_ai_spellbook_events.001
		}
	}
}

ancient_magic_ai_spellbook_events.405 = { #Living Earthworks
	immediate = {
		if = {
			limit = {
				var:mana >= 100
				NOT = {
					has_character_modifier = living_earthworks_modifier
				}
			}

			change_mana = { VALUE = -100 }

			change_mana_gen = { VALUE = -15 }

			while = {
				count = mage_level
				add_character_modifier = {
					modifier = living_earthworks_modifier
					mode = add
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					has_character_modifier = living_earthworks_modifier
				}
			}

			change_mana_gen = { VALUE = 15 }

			while = {
				count = 100
				remove_character_modifier = living_earthworks_modifier
			}
		}
		
		if = {
			limit = {
				var:mana >= 150
			}
			trigger_event = ancient_magic_ai_spellbook_events.001
		}
	}
}

ancient_magic_ai_spellbook_events.406 = { #Control Water
	immediate = {
		if = {
			limit = {
				var:mana >= 100
				NOT = {
					has_character_modifier = control_water_modifier
				}
			}

			change_mana = { VALUE = -100 }

			change_mana_gen = { VALUE = -15 }

			while = {
				count = mage_level
				add_character_modifier = {
					modifier = control_water_modifier
					mode = add
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					has_character_modifier = control_water_modifier
				}
			}

			change_mana_gen = { VALUE = 15 }

			while = {
				count = 100
				remove_character_modifier = control_water_modifier
			}
		}
		
		if = {
			limit = {
				var:mana >= 150
			}
			trigger_event = ancient_magic_ai_spellbook_events.001
		}
	}
}

ancient_magic_ai_spellbook_events.407 = { #Draught
	title = ancient_magic_ai_spellbook_events.407.t
	desc = ancient_magic_ai_spellbook_events.407.desc
	
	option = {
		name = ancient_magic_spellbook_activate_aura
		trigger = {
			var:mana >= 100
			has_perk = drought_perk
			NOT = {
				has_character_modifier = drought_modifier
			}
		}
		show_as_unavailable = {
			OR = {
				var:mana < 100
				has_character_modifier = drought_modifier
			}
		}

		change_mana = { VALUE = -100 }

		change_mana_gen = { VALUE = -15 }

		while = {
			count = mage_level
			add_character_modifier = {
				modifier = drought_modifier
				mode = add
			}
		}
	}

	option = {
		name = ancient_magic_spellbook_deactivate_aura
		trigger = {
			var:mana >= 100
			has_perk = drought_perk
			has_character_modifier = drought_modifier
		}
		show_as_unavailable = {
			var:mana < 100
			NOT = {
				has_character_modifier = drought_modifier
			}
		}

		change_mana_gen = { VALUE = 15 }

		while = {
			count = 100
			remove_character_modifier = drought_modifier
		}
	}
	
	option = {
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.004
	}
}

ancient_magic_ai_spellbook_events.408 = { #Cloak of Elements
	immediate = {
		if = {
			limit = {
				NOT = {
					has_character_modifier = elemental_warrior_modifier
				}
			}

			change_mana = { VALUE = -100 }

			change_mana_gen = { VALUE = -30 }

			while = {
				count = mage_level
				add_character_modifier = {
					modifier = elemental_warrior_modifier
					mode = add
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					has_character_modifier = elemental_warrior_modifier
				}
			}

			change_mana_gen = { VALUE = 30 }

			while = {
				count = 100
				remove_character_modifier = elemental_warrior_modifier
			}
		}
		
		if = {
			limit = {
				var:mana >= 150
			}
			trigger_event = ancient_magic_ai_spellbook_events.001
		}
	}
}

#death spells
ancient_magic_ai_spellbook_events.501 = { #Raise Undead Horde
	trigger = {
		var:mana >= 200
		NOT = {
			has_character_modifier = undead_horde_cooldown_modifier
		}
		has_perk = necromancy_perk
	}
	immediate = {
		change_mana = { VALUE = -200 }
		
		spawn_army = {
			name = undead_horde
			uses_supply = no
			inheritable = no
			men_at_arms = {
				type = undead
				stacks = mage_level
			}
			levy = 0
			location = capital_province
		}
		add_character_modifier = {
			modifier = undead_horde_cooldown_modifier
			years = 2
		}
		
		if = {
			limit = {
				var:mana >= 150
			}
			trigger_event = ancient_magic_ai_spellbook_events.001
		}
	}
}

ancient_magic_ai_spellbook_events.502 = { #Become Liche
	trigger = {
		var:mana >= 600
		NOT = { has_trait = undead }
		has_trait = deacon_of_death
	}
	immediate = {
		change_mana = { VALUE = -600 }
		add_trait = undead
		
		if = {
			limit = {
				var:mana >= 150
			}
			trigger_event = ancient_magic_ai_spellbook_events.001
		}
	}
}

ancient_magic_ai_spellbook_events.503 = { #Grand Gift of Unlife
	title = ancient_magic_ai_spellbook_events.503.t
	desc = ancient_magic_ai_spellbook_events.503.desc
	
	option = {
		name = ancient_magic_spellbook_cast_spell
		trigger = {
			var:mana >= 600
			NOT = { has_character_modifier = gift_of_unlife_spell_modifier }
			has_trait = deacon_of_death
		}
		show_as_unavailable = {
			OR = {
				var:mana < 600
				has_character_modifier = gift_of_unlife_spell_modifier
				NOT = { has_trait = deacon_of_death }
			}
		}
		change_mana = { VALUE = -600 }
		add_character_modifier = {
			modifier = gift_of_unlife_spell_modifier
			months = 6
		}
	}
	
	option = {
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.005
	}
}

ancient_magic_ai_spellbook_events.504 = { #Inflict Illness
	title = ancient_magic_ai_spellbook_events.504.t
	desc = ancient_magic_ai_spellbook_events.504.desc
	
	option = {
		name = ancient_magic_spellbook_cast_spell
		trigger = {
			var:mana >= 50
			has_perk = inflict_illness_perk
			NOT = {
				has_character_modifier = inflict_illness_spell_modifier
			}
		}
		show_as_unavailable = {
			OR = {
				var:mana < 50
				has_character_modifier = inflict_illness_spell_modifier
				NOT = {
					has_perk = inflict_illness_perk
				}
			}
		}
		change_mana = { VALUE = -50 }
		add_character_modifier = {
			modifier = inflict_illness_spell_modifier
			months = 6
		}
	}
	
	option = {
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.005
	}
}
ancient_magic_ai_spellbook_events.505 = { #Spread Plague
	title = ancient_magic_ai_spellbook_events.505.t
	desc = ancient_magic_ai_spellbook_events.505.desc
	
	option = {
		name = ancient_magic_spellbook_cast_spell
		trigger = {
			var:mana >= 300
			has_perk = plague_lord_perk
			NOT = {
				has_character_modifier = spread_plague_spell_modifier
			}
		}
		show_as_unavailable = {
			OR = {
				var:mana < 300
				has_character_modifier = spread_plague_spell_modifier
				NOT = {
					has_perk = plague_lord_perk
				}
			}
		}
		change_mana = { VALUE = -300 }
		add_character_modifier = {
			modifier = spread_plague_spell_modifier
			months = 6
		}
	}
	
	option = {
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.005
	}
}
ancient_magic_ai_spellbook_events.506 = { #Drain Life
	title = ancient_magic_ai_spellbook_events.506.t
	desc = ancient_magic_ai_spellbook_events.506.desc
	
	option = {
		name = ancient_magic_spellbook_cast_spell
		trigger = {
			var:mana >= 200
			has_perk = drain_life_perk
			NOT = {
				has_character_modifier = drain_life_spell_modifier
			}
		}
		show_as_unavailable = {
			OR = {
				var:mana < 200
				has_character_modifier = drain_life_spell_modifier
				NOT = {
					has_perk = drain_life_perk
				}
			}
		}
		change_mana = { VALUE = -200 }
		add_character_modifier = {
			modifier = drain_life_spell_modifier
			months = 6
		}
	}
	
	option = {
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.005
	}
}
ancient_magic_ai_spellbook_events.507 = { #Death Stare
	title = ancient_magic_ai_spellbook_events.507.t
	desc = ancient_magic_ai_spellbook_events.507.desc
	
	option = {
		name = ancient_magic_spellbook_cast_spell
		trigger = {
			var:mana >= 600
			has_perk = death_stare_perk
			NOT = {
				has_character_modifier = death_stare_spell_modifier
			}
		}
		show_as_unavailable = {
			OR = {
				var:mana < 600
				has_character_modifier = death_stare_spell_modifier
				NOT = {
					has_perk = death_stare_perk
				}
			}
		}
		change_mana = { VALUE = -600 }
		add_character_modifier = {
			modifier = death_stare_spell_modifier
			months = 6
		}
	}
	
	option = {
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.005
	}
}

ancient_magic_ai_spellbook_events.508 = { #Aura of Death
	immediate = {
		if = {
			limit = {
				NOT = {
					has_character_modifier = aura_of_death_modifier
				}
			}

			change_mana = { VALUE = -100 }

			change_mana_gen = { VALUE = -30 }

			while = {
				count = mage_level
				add_character_modifier = {
					modifier = aura_of_death_modifier
					mode = add
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					has_character_modifier = aura_of_death_modifier
				}
			}

			change_mana_gen = { VALUE = 30 }

			while = {
				count = 100
				remove_character_modifier = aura_of_death_modifier
			}
		}
		
		if = {
			limit = {
				var:mana >= 150
			}
			trigger_event = ancient_magic_ai_spellbook_events.001
		}
	}
}

#Biomancy spells

ancient_magic_ai_spellbook_events.601 = { #Strengthen Blood
	title = ancient_magic_ai_spellbook_events.601.t
	desc = ancient_magic_ai_spellbook_events.601.desc
	
	option = {
		name = ancient_magic_spellbook_cast_spell
		trigger = {
			var:mana >= 100
			has_perk = improve_trait_perk
			NOT = {
				has_character_modifier = improve_trait_spell_modifier
			}
		}
		show_as_unavailable = {
			OR = {
				var:mana < 100
				has_character_modifier = improve_trait_spell_modifier
				NOT = {
					has_perk = improve_trait_perk
				}
			}
		}
		change_mana = { VALUE = -100 }
		add_character_modifier = {
			modifier = improve_trait_spell_modifier
			months = 6
		}
	}
	
	option = {
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.006
	}
}
ancient_magic_ai_spellbook_events.602 = { #Perfect Blood
	title = ancient_magic_ai_spellbook_events.602.t
	desc = ancient_magic_ai_spellbook_events.602.desc
	
	option = {
		name = ancient_magic_spellbook_cast_spell
		trigger = {
			var:mana >= 200
			has_perk = perfect_trait_perk
			NOT = {
				has_character_modifier = perfect_trait_spell_modifier
			}
		}
		show_as_unavailable = {
			OR = {
				var:mana < 200
				has_character_modifier = perfect_trait_spell_modifier
				NOT = {
					has_perk = perfect_trait_perk
				}
			}
		}
		change_mana = { VALUE = -200 }
		add_character_modifier = {
			modifier = perfect_trait_spell_modifier
			months = 6
		}
	}
	
	option = {
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.006
	}
}
ancient_magic_ai_spellbook_events.603 = { #Weaken Blood
	title = ancient_magic_ai_spellbook_events.603.t
	desc = ancient_magic_ai_spellbook_events.603.desc
	
	option = {
		name = ancient_magic_spellbook_cast_spell
		trigger = {
			var:mana >= 100
			has_perk = weaken_trait_perk
			NOT = {
				has_character_modifier = weaken_trait_spell_modifier
			}
		}
		show_as_unavailable = {
			OR = {
				var:mana < 100
				has_character_modifier = weaken_trait_spell_modifier
				NOT = {
					has_perk = weaken_trait_perk
				}
			}
		}
		change_mana = { VALUE = -100 }
		add_character_modifier = {
			modifier = weaken_trait_spell_modifier
			months = 6
		}
	}
	
	option = {
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.006
	}
}
ancient_magic_ai_spellbook_events.604 = { #Criple Blood
	title = ancient_magic_ai_spellbook_events.604.t
	desc = ancient_magic_ai_spellbook_events.604.desc
	
	option = {
		name = ancient_magic_spellbook_cast_spell
		trigger = {
			var:mana >= 200
			has_perk = criple_trait_perk
			NOT = {
				has_character_modifier = criple_trait_spell_modifier
			}
		}
		show_as_unavailable = {
			OR = {
				var:mana < 200
				has_character_modifier = criple_trait_spell_modifier
				NOT = {
					has_perk = criple_trait_perk
				}
			}
		}
		change_mana = { VALUE = -200 }
		add_character_modifier = {
			modifier = criple_trait_spell_modifier
			months = 6
		}
	}
	
	option = {
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.006
	}
}
ancient_magic_ai_spellbook_events.605 = { #Fertility Control
	title = ancient_magic_ai_spellbook_events.605.t
	desc = ancient_magic_ai_spellbook_events.605.desc
	
	option = {
		name = ancient_magic_ai_spellbook_events.605.a
		trigger = {
			var:mana >= 100
			has_perk = improve_trait_perk
			NOT = {
				has_character_modifier = biomantic_fertility_modifier
			}
		}
		show_as_unavailable = {
			OR = {
				var:mana < 100
				has_character_modifier = biomantic_fertility_modifier
				NOT = {
					has_character_modifier = fertility_control_perk
				}
			}
		}
		change_mana = { VALUE = -100 }
		if = {
			limit = {
				has_character_modifier = biomantic_infertility_modifier
			}
			remove_character_modifier = biomantic_infertility_modifier
			change_mana_gen = { VALUE = 10 }
		}
		add_character_modifier = biomantic_fertility_modifier
		change_mana_gen = { VALUE = -10 }
	}
	
	option = {
		name = ancient_magic_ai_spellbook_events.605.b
		trigger = {
			var:mana >= 100
			has_perk = fertility_control_perk
			NOT = {
				has_character_modifier = criple_trait_spell_modifier
			}
		}
		show_as_unavailable = {
			OR = {
				var:mana < 100
				NOT = {
					has_character_modifier = biomantic_infertility_modifier
					has_character_modifier = biomantic_fertility_modifier
				}
				NOT = {
					has_perk = fertility_control_perk
				}
			}
		}
		change_mana = { VALUE = -100 }
		if = {
			limit = {
				has_character_modifier = biomantic_infertility_modifier
			}
			remove_character_modifier = biomantic_infertility_modifier
			change_mana_gen = { VALUE = 10 }
		}
		if = {
			limit = {
				has_character_modifier = biomantic_fertility_modifier
			}
			remove_character_modifier = biomantic_fertility_modifier
			change_mana_gen = { VALUE = 10 }
		}
	}
	
	option = {
		name = ancient_magic_ai_spellbook_events.605.c
		trigger = {
			var:mana >= 100
			has_perk = fertility_control_perk
			NOT = {
				has_character_modifier = criple_trait_spell_modifier
			}
		}
		show_as_unavailable = {
			OR = {
				var:mana < 100
				has_character_modifier = criple_trait_spell_modifier
				NOT = {
					has_perk = fertility_control_perk
				}
			}
		}
		change_mana = { VALUE = -100 }
		if = {
			limit = {
				has_trait = biomantic_fertility_modifier
			}
			remove_character_modifier = biomantic_fertility_modifier
			change_mana_gen = { VALUE = 10 }
		}
		add_character_modifier = biomantic_infertility_modifier
		change_mana_gen = { VALUE = -10 }
	}
	
	option = {
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.006
	}
}

ancient_magic_ai_spellbook_events.606 = { #Impregnate
	title = ancient_magic_ai_spellbook_events.606.t
	desc = ancient_magic_ai_spellbook_events.606.desc
	
	option = {
		name = ancient_magic_spellbook_cast_spell
		trigger = {
			var:mana >= 300
			has_perk = impregnate_perk
			NOT = {
				has_character_modifier = impregnate_spell_modifier
			}
		}
		show_as_unavailable = {
			OR = {
				var:mana < 300
				has_character_modifier = impregnate_spell_modifier
				NOT = {
					has_perk = impregnate_perk
				}
			}
		}
		change_mana = { VALUE = -300 }
		add_character_modifier = {
			modifier = impregnate_spell_modifier
			months = 6
		}
	}
	
	option = {
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.006
	}
}

ancient_magic_ai_spellbook_events.607 = { #Sculpt Flesh
	title = ancient_magic_ai_spellbook_events.607.t
	desc = ancient_magic_ai_spellbook_events.607.desc
	
	option = {
		name = ancient_magic_spellbook_cast_spell
		trigger = {
			var:mana >= 300
			has_perk = sculpter_of_flesh_perk
			NOT = {
				has_character_modifier = sculpter_of_flesh_spell_modifier
			}
		}
		show_as_unavailable = {
			OR = {
				var:mana < 300
				has_character_modifier = sculpter_of_flesh_spell_modifier
				NOT = {
					has_perk = sculpter_of_flesh_perk
				}
			}
		}
		change_mana = { VALUE = -300 }
		add_character_modifier = {
			modifier = sculpter_of_flesh_spell_modifier
			months = 6
		}
	}
	
	option = {
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.006
	}
}

ancient_magic_ai_spellbook_events.608 = { #Rewrite Blood
	title = ancient_magic_ai_spellbook_events.608.t
	desc = ancient_magic_ai_spellbook_events.608.desc
	
	option = {
		name = ancient_magic_spellbook_cast_spell
		trigger = {
			var:mana >= 400
			has_perk = architect_of_bloodlines_perk
			NOT = {
				has_character_modifier = rewrite_blood_spell_modifier
			}
		}
		show_as_unavailable = {
			OR = {
				var:mana < 400
				has_character_modifier = rewrite_blood_spell_modifier
				NOT = {
					has_perk = architect_of_bloodlines_perk
				}
			}
		}
		change_mana = { VALUE = -400 }
		add_character_modifier = {
			modifier = rewrite_blood_spell_modifier
			months = 6
		}
	}
	
	option = {
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.006
	}
}

#mensomancy

ancient_magic_ai_spellbook_events.701 = { #Entrance
	title = ancient_magic_ai_spellbook_events.701.t
	desc = ancient_magic_ai_spellbook_events.701.desc
	
	option = {
		name = ancient_magic_spellbook_cast_spell
		trigger = {
			var:mana >= 100
			has_perk = entrance_perk
			NOT = {
				has_character_modifier = entrance_spell_modifier
			}
		}
		show_as_unavailable = {
			OR = {
				var:mana < 100
				has_character_modifier = entrance_spell_modifier
				NOT = {
					has_perk = entrance_perk
				}
			}
		}
		change_mana = { VALUE = -100 }
		add_character_modifier = {
			modifier = entrance_spell_modifier
			months = 6
		}
	}
	
	option = {
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.007
	}
}

ancient_magic_ai_spellbook_events.702 = { #Incite Lust
	title = ancient_magic_ai_spellbook_events.702.t
	desc = ancient_magic_ai_spellbook_events.702.desc
	
	option = {
		name = ancient_magic_spellbook_cast_spell
		trigger = {
			var:mana >= 300
			has_perk = incite_lust_perk
			NOT = {
				has_character_modifier = incite_lust_spell_modifier
			}
		}
		show_as_unavailable = {
			OR = {
				var:mana < 300
				has_character_modifier = incite_lust_spell_modifier
				NOT = {
					has_perk = incite_lust_perk
				}
			}
		}
		change_mana = { VALUE = -300 }
		add_character_modifier = {
			modifier = incite_lust_spell_modifier
			months = 6
		}
	}
	
	option = {
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.007
	}
}

ancient_magic_ai_spellbook_events.703 = { #Incite Obedience
	title = ancient_magic_ai_spellbook_events.703.t
	desc = ancient_magic_ai_spellbook_events.703.desc
	
	option = {
		name = ancient_magic_spellbook_cast_spell
		trigger = {
			var:mana >= 200
			has_perk = incite_obedience_perk
			NOT = {
				has_character_modifier = incite_obedience_spell_modifier
			}
		}
		show_as_unavailable = {
			OR = {
				var:mana < 200
				has_character_modifier = incite_obedience_spell_modifier
				NOT = {
					has_perk = incite_obedience_perk
				}
			}
		}
		change_mana = { VALUE = -200 }
		add_character_modifier = {
			modifier = incite_obedience_spell_modifier
			months = 6
		}
	}
	
	option = {
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.007
	}
}

ancient_magic_ai_spellbook_events.704 = { #Dominate
	title = ancient_magic_ai_spellbook_events.704.t
	desc = ancient_magic_ai_spellbook_events.704.desc
	
	option = {
		name = ancient_magic_spellbook_cast_spell
		trigger = {
			var:mana >= 400
			has_perk = dominate_perk
			NOT = {
				has_character_modifier = dominate_spell_modifier
			}
		}
		show_as_unavailable = {
			OR = {
				var:mana < 400
				has_character_modifier = dominate_spell_modifier
				NOT = {
					has_perk = dominate_perk
				}
			}
		}
		change_mana = { VALUE = -400 }
		add_character_modifier = {
			modifier = dominate_spell_modifier
			months = 6
		}
	}
	
	option = {
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.007
	}
}

ancient_magic_ai_spellbook_events.705 = { #Beguiling Aura
	title = ancient_magic_ai_spellbook_events.705.t
	desc = ancient_magic_ai_spellbook_events.705.desc
	
	option = {
		name = ancient_magic_spellbook_activate_aura
		trigger = {
			var:mana >= 100
			has_perk = beguiling_aura_perk
			NOT = {
				has_character_modifier = beguiling_aura_modifier
			}
		}
		show_as_unavailable = {
			OR = {
				var:mana < 100
				has_character_modifier = beguiling_aura_modifier
			}
		}

		change_mana = { VALUE = -100 }

		change_mana_gen = { VALUE = -15 }

		while = {
			count = mage_level
			add_character_modifier = {
				modifier = beguiling_aura_modifier
				mode = add
			}
		}
	}

	option = {
		name = ancient_magic_spellbook_deactivate_aura
		trigger = {
			var:mana >= 100
			has_perk = beguiling_aura_perk
			has_character_modifier = beguiling_aura_modifier
		}
		show_as_unavailable = {
			var:mana < 100
			NOT = {
				has_character_modifier = beguiling_aura_modifier
			}
		}

		change_mana_gen = { VALUE = 15 }

		while = {
			count = 100
			remove_character_modifier = beguiling_aura_modifier
		}
	}
	
	option = {
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.007
	}
}

ancient_magic_ai_spellbook_events.706 = { #Friendship
	title = ancient_magic_ai_spellbook_events.706.t
	desc = ancient_magic_ai_spellbook_events.706.desc
	
	option = {
		name = ancient_magic_spellbook_cast_spell
		trigger = {
			var:mana >= 400
			has_perk = friendship_perk
			NOT = {
				has_character_modifier = friendship_spell_modifier
			}
		}
		show_as_unavailable = {
			OR = {
				var:mana < 400
				has_character_modifier = friendship_spell_modifier
				NOT = {
					has_perk = friendship_perk
				}
			}
		}
		change_mana = { VALUE = -400 }
		add_character_modifier = {
			modifier = friendship_spell_modifier
			months = 6
		}
	}
	
	option = {
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.007
	}
}

ancient_magic_ai_spellbook_events.707 = { #Mind Control
	title = ancient_magic_ai_spellbook_events.707.t
	desc = ancient_magic_ai_spellbook_events.707.desc
	
	option = {
		name = ancient_magic_spellbook_cast_spell
		trigger = {
			var:mana >= 600
			has_perk = master_of_puppets_perk
			NOT = {
				has_character_modifier = master_of_puppets_spell_modifier
			}
		}
		show_as_unavailable = {
			OR = {
				var:mana < 600
				has_character_modifier = master_of_puppets_spell_modifier
				NOT = {
					has_perk = master_of_puppets_perk
				}
			}
		}
		change_mana = { VALUE = -600 }
		add_character_modifier = {
			modifier = master_of_puppets_spell_modifier
			months = 6
		}
	}
	
	option = {
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.007
	}
}

ancient_magic_ai_spellbook_events.708 = { #Enchanting Aura
	title = ancient_magic_ai_spellbook_events.708.t
	desc = ancient_magic_ai_spellbook_events.708.desc
	
	option = {
		name = ancient_magic_spellbook_activate_aura
		trigger = {
			var:mana >= 100
			has_perk = enchanting_aura_perk
			NOT = {
				has_character_modifier = enchanting_aura_modifier
			}
		}
		show_as_unavailable = {
			OR = {
				var:mana < 100
				has_character_modifier = enchanting_aura_modifier
			}
		}

		change_mana = { VALUE = -100 }

		change_mana_gen = { VALUE = -30 }

		while = {
			count = mage_level
			add_character_modifier = {
				modifier = enchanting_aura_modifier
				mode = add
			}
		}
	}

	option = {
		name = ancient_magic_spellbook_deactivate_aura
		trigger = {
			var:mana >= 100
			has_perk = enchanting_aura_perk
			has_character_modifier = enchanting_aura_modifier
		}
		show_as_unavailable = {
			var:mana < 100
			NOT = {
				has_character_modifier = enchanting_aura_modifier
			}
		}

		change_mana_gen = { VALUE = 30 }

		while = {
			count = 100
			remove_character_modifier = enchanting_aura_modifier
		}
	}
	
	option = {
		name = ancient_magic_ai_spellbook_events_back
		trigger_event = ancient_magic_ai_spellbook_events.007
	}
}