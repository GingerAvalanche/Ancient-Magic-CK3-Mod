namespace = ancient_magic_aura_update_events

ancient_magic_aura_update_events.001 = {
	hidden = yes

	trigger = {
		has_trait = mage
	}

	immediate = {
		if = {
			limit = { has_character_modifier = glimpse_the_future_modifier }
			remove_all_character_modifier_instances = glimpse_the_future_modifier
			while = {
				count = mage_level
				add_character_modifier = { modifier = glimpse_the_future_modifier }
			}
		}
		if = {
			limit = { has_character_modifier = financial_times_modifier }
			remove_all_character_modifier_instances = financial_times_modifier
			while = {
				count = mage_level
				add_character_modifier = { modifier = financial_times_modifier }
			}
		}
		if = {
			limit = { has_character_modifier = celerity_modifier }
			remove_all_character_modifier_instances = celerity_modifier
			while = {
				count = mage_level
				add_character_modifier = { modifier = celerity_modifier }
			}
		}
		if = {
			limit = { has_character_modifier = mass_celerity_modifier }
			remove_all_character_modifier_instances = mass_celerity_modifier
			while = {
				count = mage_level
				add_character_modifier = { modifier = mass_celerity_modifier }
			}
		}
		if = {
			limit = {
				exists = var:slowness_target
				var:slowness_target = { has_character_modifier = slowness_modifier }
			}
			var:slowness_target = {
				remove_all_character_modifier_instances = slowness_modifier
				while = {
					count = prev.mage_level
					add_character_modifier = { modifier = slowness_modifier }
				}
			}
		}
		if = {
			limit = {
				exists = var:mass_slowness_target
				var:mass_slowness_target = { has_character_modifier = mass_slowness_modifier }
			}
			var:mass_slowness_target = {
				remove_all_character_modifier_instances = mass_slowness_modifier
				while = {
					count = prev.mage_level
					add_character_modifier = { modifier = mass_slowness_modifier }
				}
			}
		}
		if = {
			limit = { has_character_modifier = temporal_manipulation_modifier }
			remove_all_character_modifier_instances = temporal_manipulation_modifier
			while = {
				count = mage_level
				add_character_modifier = { modifier = temporal_manipulation_modifier }
			}
		}
		if = {
			limit = { has_character_modifier = magic_haste_modifier }
			remove_all_character_modifier_instances = magic_haste_modifier
			while = {
				count = mage_level
				add_character_modifier = { modifier = magic_haste_modifier }
			}
		}
		if = {
			limit = { has_character_modifier = flame_aura_modifier }
			remove_all_character_modifier_instances = flame_aura_modifier
			while = {
				count = mage_level
				add_character_modifier = { modifier = flame_aura_modifier }
			}
		}
		if = {
			limit = { has_character_modifier = flaming_weapons_modifier }
			remove_all_character_modifier_instances = flaming_weapons_modifier
			while = {
				count = mage_level
				add_character_modifier = { modifier = flaming_weapons_modifier }
			}
		}
		if = {
			limit = { has_character_modifier = living_earthworks_modifier }
			remove_all_character_modifier_instances = living_earthworks_modifier
			while = {
				count = mage_level
				add_character_modifier = { modifier = living_earthworks_modifier }
			}
		}
		if = {
			limit = { has_character_modifier = control_water_modifier }
			remove_all_character_modifier_instances = control_water_modifier
			while = {
				count = mage_level
				add_character_modifier = { modifier = control_water_modifier }
			}
		}
		if = {
			limit = { has_character_modifier = drought_modifier }
			remove_all_character_modifier_instances = drought_modifier
			while = {
				count = mage_level
				add_character_modifier = { modifier = drought_modifier }
			}
		}
		if = {
			limit = { has_character_modifier = elemental_warrior_modifier }
			remove_all_character_modifier_instances = elemental_warrior_modifier
			while = {
				count = mage_level
				add_character_modifier = { modifier = elemental_warrior_modifier }
			}
		}
		if = {
			limit = { has_character_modifier = aura_of_death_modifier }
			remove_all_character_modifier_instances = aura_of_death_modifier
			while = {
				count = mage_level
				add_character_modifier = { modifier = aura_of_death_modifier }
			}
		}
		if = {
			limit = { has_character_modifier = beguiling_aura_modifier }
			remove_all_character_modifier_instances = beguiling_aura_modifier
			while = {
				count = mage_level
				add_character_modifier = { modifier = beguiling_aura_modifier }
			}
		}
		if = {
			limit = { has_character_modifier = enchanting_aura_modifier }
			remove_all_character_modifier_instances = enchanting_aura_modifier
			while = {
				count = mage_level
				add_character_modifier = { modifier = enchanting_aura_modifier }
			}
		}
	}
}